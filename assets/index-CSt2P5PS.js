import{initializeApp as M}from"https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";import{onValue as $,push as x,getDatabase as v,ref as T}from"https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();async function O(){try{return await(await fetch("/help.json")).json()}catch(n){console.error("There was a problem with the fetch operation:",n)}}async function j(){try{return await(await fetch("/about.json")).json()}catch(n){console.error("There was a problem with the fetch operation:",n)}}function L(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function C(n){return n.replaceAll("&amp;","&").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#039;","'")}function I(){const[n,t,e]=b(),a=document.createElement("p"),o=document.querySelector("#currPrompt input");a.textContent=o.value,document.getElementById("currPrompt").remove();const l=document.createElement("div");l.classList.add("prompt"),l.appendChild(t),l.appendChild(n),l.appendChild(e),l.appendChild(a),p.appendChild(l)}function f(){const[n,t,e]=b(),a=document.createElement("input");a.setAttribute("spellcheck","false"),a.addEventListener("keydown",async i=>{i.key==="Enter"&&await Z(L(a.value))});const o=document.createElement("div");o.classList.add("prompt"),o.id="currPrompt",o.appendChild(t),o.appendChild(n),o.appendChild(e),o.appendChild(a),p.appendChild(o),a.focus()}function y(n){for(let t=0;t<n.length;t++){const e=n[t].command,a=n[t].response,[o,i,l]=b(),s=document.createElement("p");s.innerHTML=e;const c=document.createElement("p");c.innerHTML=a,c.classList.add("response");const d=document.createElement("div");d.classList.add("prompt"),d.appendChild(i),d.appendChild(o),d.appendChild(l),d.appendChild(s),p.appendChild(d),p.appendChild(c)}}function b(){const n=document.createElement("span");n.innerHTML="@"+window.location.hostname,n.classList.add("domain","green");const t=document.createElement("span");t.classList.add("user","green"),t.innerHTML="guest";const e=document.createElement("span");return e.classList.add("directory"),e.innerHTML=":"+Y+" $&nbsp;",[n,t,e]}function S(n){const t=new Date(n),e=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=t.getDate(),o=e[t.getMonth()],i=t.getFullYear(),l=t.getHours(),s=t.getMinutes(),c=a<10?`0${a}`:a,d=l<10?`0${l}`:l,H=s<10?`0${s}`:s;return`${o} ${c}, ${i} - ${d}:${H}`}function A(){return new Promise((n,t)=>{let e=[];$(_,a=>{e=[],e.push("hello world!"),e.push("computer bugs started with actual bugs"),e.push("have you tried 'ls -a' yet?"),e.push("leave a note with 'echo [content] >> notes.txt'"),a.val()&&Object.entries(a.val()).forEach(([o,i])=>{e.push(`${S(i.createdAt)} - ${i.content}`)}),n(e)},a=>{t(a)})})}async function P(n,t){const e={name:t,content:n},a="service_751j1hg",o="template_j5crotn";try{return await emailjs.send(a,o,e)}catch(i){return`Failed to send message. Error: ${i}`}}function N(n){const t=document.querySelector("input");t.value=n;const e=new KeyboardEvent("keydown",{key:"Enter",keyCode:13,which:13,code:"Enter",bubbles:!0});t.dispatchEvent(e)}let r,u;async function U(){r=await O(),u=await j()}U();const g=`Type <button onClick="simulateCommand('help')">'help'</button> for list of supported commands.`;function D(n,t){t.innerHTML=`${n}: command not recognized. ${g}`}function h(n){const t=document.createElement("pre");t.innerHTML=`
     ____  ___  ___  ____ ___     ____
    / __ \\/ _ \\/ _ \\/ __ \`__ \\   /_  /
   / / / /  __/  __/ / / / / /    / /_
  /_/ /_/\\___/\\___/_/ /_/ /_/    /___/  v1.1.0
  `;const e=document.createElement("p");e.innerHTML=g,n.appendChild(t),t.insertAdjacentElement("afterend",e)}function B(n,t){if(n.length>1)t.innerText=`Usage: ${r.help.usage}`;else if(n.length===1){const e=n[0];if(!(e in r)){t.innerHTML=`${e}: command not recognized. ${g}`;return}const a=document.createElement("pre");let o=`${e}: ${r[e].base}`;if(Object.keys(r[e].options).length>0){o+=`

Options:`;for(const[i,l]of Object.entries(r[e].options))o+=`
  ${i}: ${l}`}o+=`

Usage: ${r[e].usage}`,a.innerHTML=o,t.appendChild(a)}else{let e="SUPPORTED COMMANDS:";for(const[a,o]of Object.entries(r))e+=`<p>- <button class="yellow" onClick="simulateCommand('${a}')">${a}</button> - ${o.base}</p>`;e+="<br><p>Type 'help [command]' for more information on a specific command</p>",t.innerHTML=e}}function J(n){const t="https://github.com/NeemZ16/neemo.site";return n.innerText="Opening repository in new tab...",new Promise(e=>{setTimeout(()=>{window.open(t,"_blank"),n.innerText="Opened repo in new tab!",e()},500)})}function R(){localStorage.removeItem("history");const n=document.getElementById("terminal");n.innerHTML=""}function q(n){let t=localStorage.getItem("history");if(!t){n.innerHTML="No history found";return}t=JSON.parse(t);let e="";function a(o){const i=String(t.length).length;let l=String(o);for(;l.length<i;)l=" "+l;return l.replace(" ","&nbsp;")}for(let o=0;o<t.length;o++){const i=t[o];e+=`${a(o+1)} ${i.command}<br>`}n.innerHTML=e}async function w(n,t){if(n.length===0){const e=document.createElement("a");e.href="mailto:neemzam2+site@gmail.com?subject=Site%20Message%20-%20",e.target="_blank",e.textContent="neemzam2[at]gmail.com";const a=document.createElement("a");a.href="https://github.com/Neemz16",a.target="_blank",a.textContent="github.com/NeemZ16";const o=document.createElement("a");o.href="https://www.linkedin.com/in/neem-zaman",o.target="_blank",o.textContent="linkedin.com/in/neem-zaman";const i=document.createElement("p");i.textContent="- Email: ",i.appendChild(e);const l=document.createElement("p");l.textContent="- GitHub: ",l.appendChild(a);const s=document.createElement("p");s.textContent="- LinkedIn: ",s.appendChild(o),t.appendChild(s),t.appendChild(i),t.appendChild(l)}else if(n.length===1&&n[0]==="-m")t.innerText="Please provide a message after '-m'.";else if(n[0]==="-m"){let e=n.length,a="@default_sender";if(n.includes("-from")&&n.indexOf("-from")===n.length-1){t.innerText="Please provide value for '-from' argument";return}else n.includes("-from")&&(e=n.indexOf("-from"),a=n.slice(e+1).join(" ").trim());const o=n.slice(1,e).join(" ").trim();if(o){if(!a){t.innerText="Please provide message sender";return}}else{t.innerText="Please provide message content";return}try{(await P(o,a)).status==200?t.innerText="Message sent successfully!":t.innerText="Unable to send message :("}catch(i){t.innerText=`Failed to send message. Error: ${i}`}}else t.innerHTML=`Usage: ${r.contact.usage}. Type <button onClick="simulateCommand(help contact)">'help contact'</button> for more information.`}function z(n,t){let e=`<button class='lsItem' onClick="simulateCommand('open blog.html')">blog.html</button>`;e+=`	<button class='lsItem' onClick="simulateCommand('open notes.txt')">notes.txt</button>`,e+=`	<button class='lsItem' onClick="simulateCommand('open about')">about</button>`,n.length>1?e=`Usage: ${r.ls.usage}`:n.length===1&&n[0]=="-a"?e=`<button class='lsItem' onClick="simulateCommand('open .secrets.txt')">.secrets.txt</button>	`+e:n.length===1&&(e=`Usage: ${r.ls.usage}. Type <button onClick="simulateCommand(help ls)">'help ls'</button> for more information.`);const a=document.createElement("pre");a.innerHTML=e,a.classList.add("yellow"),t.appendChild(a)}async function F(n,t){if(n.length===0)t.innerHTML=`Usage: ${r.open.usage}. Type <button onClick="simulateCommand('ls')">'ls'</button> to see available files.`;else if(n.length===1){let e=`open: Requested file not found. Type <button onClick="simulateCommand('ls')">'ls'</button> to see available files.`;if(n[0]=="blog.html")e="No blog entries yet!";else if(n[0]=="notes.txt")try{const a=await A();e="NOTES:";for(const o of a)e+=`<br>- ${o}`}catch(a){e=`Unable to fetch notes. Error: ${a}`}else if(n[0]==".secrets.txt")e="ðŸ¥š";else if(n[0]=="about"){E([],t);return}t.innerHTML=e}else t.innerText=`Usage: ${r.open.usage}`}function E(n,t){if(n.length==0){const e=document.createElement("div"),a=document.createElement("img");a.src="neem.png",a.alt="Neem in front of plants",t.appendChild(a),t.innerHTML+="<br>";const o=document.createElement("p");o.classList.add("limWidth"),o.innerHTML=u.bio.intro,e.appendChild(o),e.innerHTML+="<br>";const i=document.createElement("p");i.classList.add("limWidth"),i.innerHTML=u.bio.teaching,e.appendChild(i),e.innerHTML+="<br>";const l=document.createElement("div");l.innerHTML+="Here are some <span class='yellow'>fun facts</span> about me:",l.classList.add("limWidth"),u.bio["selected fun facts"].forEach(s=>{const c=document.createElement("p");c.innerHTML=s,l.appendChild(c)}),e.appendChild(l),e.innerHTML+="<br>",t.appendChild(e),t.innerHTML+="<p class='green'>LINKS:</p>",w([],t),t.innerHTML+="<br>",t.innerHTML+=`<button onClick="simulateCommand('about -proj')">See Projects</button>`,t.innerHTML+="<br>",t.innerHTML+=`<button onClick="simulateCommand('about -skills')">See Skills</button>`}else if(n.length==1)if(n[0]=="-proj"){const e=document.createElement("div");e.innerText="These are some projects I have worked on:";for(const a of u.projects){const o=document.createElement("div"),i=document.createElement("p");i.innerHTML=`<a href="${a.link}" target="_blank">${a.title}</a>`;const l=document.createElement("p");l.innerHTML='- <span class="green">Description:</span> '+a.description;const s=document.createElement("p");s.innerHTML='- <span class="green">Technologies:</span> '+a.technologies;const c=document.createElement("p");c.innerHTML="Tags: ";for(const d of a.tags)c.innerHTML+=`<span class="yellow">#${d}</span> `;o.appendChild(i),o.appendChild(l),o.appendChild(s),o.appendChild(c),o.innerHTML+="<br>",e.appendChild(o),e.classList.add("limWidth")}t.appendChild(e)}else if(n[0]=="-skills"){const e=document.createElement("div");e.innerHTML='While I believe in choosing the <span class="green">best tool for the job</span>, these are some <span class="green">I work with often:</span>';for(const[a,o]of Object.entries(u.skills)){const i=document.createElement("p");i.innerHTML=`<span class="yellow">${a}:</span> ${o}`,e.appendChild(i)}t.appendChild(e)}else t.innerText=`Usage: ${r.about.usage}`;else t.innerText=`Usage: ${r.about.usage}`}function W(n,t){const e=L(">>");if(n.length>=1&&n[0]==e)t.innerText=`Usage: ${r.echo.usage}. Type <button onClick="simulateCommand('help echo')">'help echo'</button> for more information.`;else if(n.length>=3&&n.includes(e)&&n[0]!=e){const a=n[n.length-1];n[n.length-2];const o=n.slice(0,n.length-2).join(" ").trim();if(!o){t.innerText="No content provided.";return}if(a!="notes.txt"){t.innerText=`echo: Permission Denied - Cannot edit or create ${a} as guest user.`;return}let i={};i.content=o,i.createdAt=new Date().toISOString(),x(_,i).then(t.innerHTML=`Added <span class="green">'${o}'</span> to <span class="yellow">${a}</span>!`).catch(l=>{t.innerHTML=`Failed to append '${o}' to ${a}. Error: ${l}.`})}else t.innerHTML=n.join(" ")}async function K(n,t,e){if(["banner","hostname","repo","history","clear","hello","hi","howdy"].includes(n)&&t.length>0)return e.innerText=`${n}: command does not support arguments`,e;switch(n){case"hello":case"howdy":case"hi":e.innerHTML=`hi there! type <button onClick="simulateCommand('help')">'help'</button> to see what you can do :)`;break;case"help":B(t,e);break;case"ls":z(t,e);break;case"open":await F(t,e);break;case"banner":h(e);break;case"about":E(t,e);break;case"whoami":e.innerText="guest";break;case"hostname":e.innerText=window.location.hostname;break;case"contact":await w(t,e);break;case"repo":await J(e);break;case"history":q(e);break;case"clear":R();break;case"echo":W(t,e);break;default:D(n,e);break}return e}const G={databaseURL:"https://neemo-site-default-rtdb.firebaseio.com/"},V=M(G),k=v(V),_=T(k,"notes");T(k,"blogs");emailjs.init({publicKey:"ww8sQvOB6jOpK5L_J"});const p=document.getElementById("terminal");let Y="~",m;async function Z(n){if(!n)return;I();const t=document.createElement("p");t.classList.add("response");const e=n.split(" "),a=e[0].toLowerCase(),o=e.splice(1);try{const i=await K(a,o,t);let l=localStorage.getItem("history");l=l?JSON.parse(l):[];const s={command:n,response:i.innerHTML};l.push(s),localStorage.setItem("history",JSON.stringify(l)),m=l.length,p.appendChild(t),f()}catch(i){t.textContent=`Something went wrong. Error: ${i}`,p.appendChild(t),f()}}function Q(){window.simulateCommand=N;let n=localStorage.getItem("history");const t=document.createElement("div");if(!n){const e=document.createElement("div");h(e),p.appendChild(e),f();return}n=JSON.parse(n),n[0].command==="clear"&&n.length===1?(h(t),p.appendChild(t),localStorage.removeItem("history")):n[0].command==="clear"&&n.length>1?(n.shift(),y(n)):(h(t),p.appendChild(t),y(n)),m=n.length,f()}window.addEventListener("keydown",n=>{const t=document.querySelector("input");t&&t.focus();let e=localStorage.getItem("history");!e||n.key!=="ArrowUp"&&n.key!=="ArrowDown"||(e=JSON.parse(e),n.key==="ArrowUp"?(m>=1&&m--,t.value=C(e[m].command)):n.key==="ArrowDown"&&(m<e.length-1?(m++,t.value=C(e[m].command)):m<e.length&&(m++,t.value="")))});Q();
